version: '3'
services:
  productpage:
    build:
      context: ./Dockerfiles/ProductPage/
      dockerfile: Dockerfile.productpage
    image: g37/productpage
    container_name: g37-productpage
    volumes:
      - ./productpage:/app
    ports:
      - 9080:9080
  details:
    build:
      context: ./Dockerfiles/Details/
      dockerfile: Dockerfile.details
    image: g37/details
    container_name: g37-details
    volumes:
      - ./details:/app
    environment:
      - SERVICE_VERSION=v1
      - ENABLE_EXTERNAL_BOOK_SERVICE=true
    ports:
      - 9081:9080
  ratings:
    build:
      context: ./Dockerfiles/Ratings/
      dockerfile: Dockerfile.ratings
    image: g37/ratings
    container_name: g37-ratings
    volumes:
      - ./ratings:/app
    ports:
      - 9083:9080
  reviews:
    build:
      context: ./Dockerfiles/Reviews/reviews-wlpcfg
      dockerfile: Dockerfile
    image: g37/reviews:v3
    container_name: g37-reviews
    volumes:
      - ./reviews:/app
    environment:
      - SERVICE_VERSION=v3
      - ENABLE_RATINGS=true
      - STAR_COLOR=red
    ports:
      - 9082:9080
